{% extends 'base/base.html' %}
{% block title %}{% if edit %}Edit{% else %}Add{% endif %} Clinical Record{% endblock %}
{% block content %}
<div style="padding: 2rem 0;">
  <h2 style="font-size: 2rem; color: #0f4c81; margin-bottom: 1rem; font-weight: 700;">
    {% if edit %}Edit{% else %}Create New{% endif %} Clinical Record
  </h2>
  {% if specialization %}
    <p style="color: #6b7280; margin-bottom: 1.5rem; font-size: 0.95rem;">
      <strong>Clinic Specialization:</strong> {{ specialization }}
    </p>
  {% endif %}
  
  <form method="post" style="max-width: 700px;">
    {% csrf_token %}
    
    <div style="margin-bottom: 1.5rem;">
      <label for="{{ form.patient.id_for_label }}" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #0f172a;">
        Patient
      </label>
      {{ form.patient }}
      {% if form.patient.errors %}
        <ul style="color: #ef4444; margin-top: 0.25rem; font-size: 0.9rem;">
          {% for error in form.patient.errors %}
            <li>{{ error }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>

    <div style="margin-bottom: 1.5rem;">
      <label for="{{ form.note_type.id_for_label }}" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #0f172a;">
        Note Type
      </label>
      {{ form.note_type }}
      <p style="font-size: 0.85rem; color: #6b7280; margin-top: 0.25rem;">
        Select the type of clinical note appropriate for your specialization
      </p>
      {% if form.note_type.errors %}
        <ul style="color: #ef4444; margin-top: 0.25rem; font-size: 0.9rem;">
          {% for error in form.note_type.errors %}
            <li>{{ error }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>

    <div style="margin-bottom: 1.5rem;">
      <label for="{{ form.note.id_for_label }}" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #0f172a;">
        Note Content
      </label>
      {{ form.note }}
      {% if form.note.errors %}
        <ul style="color: #ef4444; margin-top: 0.25rem; font-size: 0.9rem;">
          {% for error in form.note.errors %}
            <li>{{ error }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>

    <div style="display: flex; gap: 1rem;">
      <button type="submit" style="background: #0f4c81; color: #fff; border: none; padding: 0.65rem 1.5rem; border-radius: 8px; font-weight: 700; cursor: pointer; font-size: 1rem;">
        Save Clinical Record
      </button>
      <a href="{% url 'clinicalrecord_list' %}" style="padding: 0.65rem 1.5rem; border-radius: 8px; border: 1px solid #d1d5db; color: #0f4c81; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center;">
        Cancel
      </a>
    </div>
  </form>
</div>

<style>
  input[type="text"], select, textarea {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 1rem;
    font-family: inherit;
  }
  
  select {
    background-color: #fff;
    cursor: pointer;
  }
  
  textarea {
    resize: vertical;
    font-family: 'Fira Code', monospace;
  }
</style>

